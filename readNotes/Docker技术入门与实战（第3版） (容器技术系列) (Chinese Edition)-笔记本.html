<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "XHTML1-s.dtd" >
<html xmlns="http://www.w3.org/TR/1999/REC-html-in-xml" xml:lang="en" lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
<style>
.bodyContainer {
    font-family: Arial, Helvetica, sans-serif;
    text-align: center;
    padding-left: 32px;
    padding-right: 32px;
}

.notebookFor {
    font-size: 18px;
    font-weight: 700;
    text-align: center;
    color: rgb(119, 119, 119);
    margin: 24px 0px 0px;
    padding: 0px;
}

.bookTitle {
    font-size: 32px;
    font-weight: 700;
    text-align: center;
    color: #333333;
    margin-top: 22px;
    padding: 0px;
}

.authors {
    font-size: 13px;
    font-weight: 700;
    text-align: center;
    color: rgb(119, 119, 119);
    margin-top: 22px;
    margin-bottom: 24px; 
    padding: 0px;
}

.sectionHeading {
    font-size: 24px;
    font-weight: 700;
    text-align: left;
    color: #333333;
    margin-top: 24px;
    padding: 0px;
}

.noteHeading {
    font-size: 18px;
    font-weight: 700;
    text-align: left;
    color: #333333;
    margin-top: 20px;
    padding: 0px;
}

.noteText {
    font-size: 18px;
    font-weight: 500;
    text-align: left;
    color: #333333;
    margin: 2px 0px 0px;
    padding: 0px;
}

.highlight_blue {
    color: rgb(178, 205, 251);
}

.highlight_orange {
    color: #ffd7ae;
}

.highlight_pink {
    color: rgb(255, 191, 206);
}

.highlight_yellow {
    color: rgb(247, 206, 0);
}

.notebookGraphic {
    margin-top: 10px;
    text-align: left;
}

.notebookGraphic img {
    -o-box-shadow:      0px 0px 5px #888;
    -icab-box-shadow:   0px 0px 5px #888;
    -khtml-box-shadow:  0px 0px 5px #888;
    -moz-box-shadow:    0px 0px 5px #888;
    -webkit-box-shadow: 0px 0px 5px #888;
    box-shadow:         0px 0px 5px #888; 
    max-width: 100%;
    height: auto;
}

hr {
    border: 0px none;
    height: 1px;
    background: none repeat scroll 0% 0% rgb(221, 221, 221);
}
</style>
</head>
<body>
<div class='bodyContainer'>
<h1><div class='notebookFor'>注释和标注：</div><div class='bookTitle'>《Docker技术入门与实战（第3版） (容器技术系列) (Chinese Edition)》
</div><div class='authors'>
作者：杨保华,戴王剑,曹亚仑
</div></h1><hr/>

<h2 class='sectionHeading'>第一部分 基础入门</h2><h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第1章 初识Docker与容器 &gt; 位置 292</div><div class='noteText'>这 里 的 应 用 组 件 ， 既 可 以 是 一 个 W e b 应 用 、 一 个 编 译 环 境 ， 也 可 以 是 一 套 数 据 库 平 台 服 务 ， 甚 至 是 一 个 操 作 系 统 或 集 群 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第1章 初识Docker与容器 &gt; 位置 294</div><div class='noteText'>可 以 说 ， D o c k e r 首 次 为 应 用 的 开 发 、 运 行 和 部 署 提 供 了 “ 一 站 式 ” 的 实 用 解 决 方 案 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第1章 初识Docker与容器 &gt; 位置 297</div><div class='noteText'>I B M D e v e l o p e r W o r k s 网 站 关 于 容 器 技 术 的 描 述 十 分 准 确 ： “ 容 器 有 效 地 将 由 单 个 操 作 系 统 管 理 的 资 源 划 分 到 孤 立 的 组 中 ， 以 更 好 地 在 孤 立 的 组 之 间 平 衡 有 冲 突 的 资 源 使 用 需 求 。 与 虚 拟 化 相 比 ， 这 样 既 不 需 要 指 令 级 模 拟 ， 也 不 需 要 即 时 编 译 。 容 器 可 以 在 核 心 C P U 本 地 运 行 指 令 ， 而 不 需 要 任 何 专 门 的 解 释 机 制 。 此 外 ， 也 避 免 了 准 虚 拟 化 （ p a r a v i r t u a l i z a t i o n ） 和 系 统 调 用 替 换 中 的 复 杂 性 。 ”</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第1章 初识Docker与容器 &gt; 位置 309</div><div class='noteText'>更 加 关 键 的 是 ， L X C 终 于 被 集 成 到 到 主 流 L i n u x 内 核 中 ， 进 而 成 为 L i n u x 系 统 轻 量 级 容 器 技 术 的 事 实 标 准 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第1章 初识Docker与容器 &gt; 位置 311</div><div class='noteText'>在 L X C 的 基 础 上 ， D o c k e r 进 一 步 优 化 了 容 器 的 使 用 体 验 ， 让 它 进 入 寻 常 百 姓 家 。 首 先 ， D o c k e r 提 供 了 各 种 容 器 管 理 工 具 （ 如 分 发 、 版 本 、 移 植 等 ） ， 让 用 户 无 须 关 注 底 层 的 操 作 ， 更 加 简 单 明 了 地 管 理 和 使 用 容 器 ； 其 次 ， D o c k e r 通 过 引 入 分 层 文 件 系 统 构 建 和 高 效 的 镜 像 机 制 ， 降 低 了 迁 移 难 度 ， 极 大 地 改 善 了 用 户 体 验 。 用 户 操 作 D o c k e r 容 器 就 像 操 作 应 用 自 身 一 样 简 单 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第1章 初识Docker与容器 &gt; 位置 324</div><div class='noteText'>D o c k e r 在 正 确 的 地 点 、 正 确 的 时 间 顺 应 了 正 确 的 趋 势 — — 如 何 正 确 地 构 建 应 用 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第1章 初识Docker与容器 &gt; 位置 344</div><div class='noteText'>D o c k e r 是 内 核 级 的 虚 拟 化 ， 可 以 实 现 更 高 的 性 能 ， 同 时 对 资 源 的 额 外 需 求 很 低 。 与 传 统 虚 拟 机 方 式 相 比 ， D o c k e r 的 性 能 要 提 高 1 ～ 2 个 数 量 级 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第1章 初识Docker与容器 &gt; 位置 356</div><div class='noteText'>D o c k e r 只 需 要 启 动 N 个 隔 离 得 “ 很 薄 的 ” 容 器 ， 并 将 应 用 放 进 容 器 内 即 可 。 应 用 获 得 的 是 接 近 原 生 的 运 行 性 能 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第1章 初识Docker与容器 &gt; 位置 359</div><div class='noteText'>从 1 . 3 . 0 版 本 开 始 ， D o c k e r 重 点 改 善 了 容 器 的 安 全 控 制 和 镜 像 的 安 全 机 制 ， 极 大 地 提 高 了 使 用 D o c k e r 的 安 全 性 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第1章 初识Docker与容器 &gt; 位置 380</div><div class='noteText'>· 操 作 系 统 级 虚 拟 化 。 内 核 通 过 创 建 多 个 虚 拟 的 操 作 系 统 实 例 （ 内 核 和 库 ） 来 隔 离 不 同 的 进 程 。 容 器 相 关 技 术 即 在 这 个 范 畴 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第2章 核心概念与安装配置 &gt; 位置 406</div><div class='noteText'>镜 像 自 身 是 只 读 的 。 容 器 从 镜 像 启 动 的 时 候 ， 会 在 镜 像 的 最 上 层 创 建 一 个 可 写 层 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第2章 核心概念与安装配置 &gt; 位置 419</div><div class='noteText'>可 以 看 出 ， D o c k e r 利 用 仓 库 管 理 镜 像 的 设 计 理 念 与 G i t 代 码 仓 库 的 概 念 非 常 相 似 ， 实 际 上 D o c k e r 设 计 上 借 鉴 了 G i t 的 很 多 优 秀 思 想 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第2章 核心概念与安装配置 &gt; 位置 421</div><div class='noteText'>D o c k e r 引 擎 是 使 用 D o c k e r 容 器 的 核 心 组 件 ， 可 以 在 主 流 的 操 作 系 统 和 云 平 台 上 使 用 ， 包 括 L i n u x 操 作 系 统 （ 如 U b u n t u 、 D e b i a n 、 C e n t O S 、 R e d h a t 等 ） ， m a c O S 和 W i n d o w s 操 作 系 统 ， 以 及 I B M 、 亚 马 逊 、 微 软 等 知 名 云 平 台 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第2章 核心概念与安装配置 &gt; 位置 436</div><div class='noteText'>U b u n t u 操 作 系 统 对 D o c k e r 的 支 持 十 分 成 熟 ， 可 以 支 持 包 括 x 8 6 _ 6 4 、 a r m h f 、 s 3 9 0 x （ I B M Z ） 、 p p c 6 4 l e 等 系 统 架 构 ， 只 要 是 6 4 位 即 可 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第2章 核心概念与安装配置 &gt; 位置 501</div><div class='noteText'>分 布 式 应 用 包 （ D i s t r i b u t e d A p p l i c a t i o n B u n d l e s ）</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第2章 核心概念与安装配置 &gt; 位置 578</div><div class='noteText'>目 前 D o c k e r 可 以 通 过 虚 拟 机 方 式 来 支 持 W i n d o w s 7 . 1 和 W i n d o w s 8 ， 只 要 平 台 C P U 支 持 硬 件 虚 拟 化 特 性 即 可 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第2章 核心概念与安装配置 &gt; 位置 615</div><div class='noteText'>从 稳 定 性 上 考 虑 ， 本 书 推 荐 实 践 环 境 的 操 作 系 统 是 U b u n t u 1 8 . 0 4 L T S 系 统 或 D e b i a n 稳 定 版 本 系 统 ， 使 用 L i n u x 4 . 0 以 上 内 核 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第2章 核心概念与安装配置 &gt; 位置 617</div><div class='noteText'>默 认 数 据 网 段 地 址 范 围 为 1 0 . 0 . 0 . 0 / 2 4 ， 管 理 网 段 地 址 范 围 为 1 9 2 . 1 6 8 . 0 . 0 / 2 4 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第6章 Docker数据管理 &gt; 位置 1180</div><div class='noteText'>如 果 直 接 挂 载 一 个 文 件 到 容 器 ， 使 用 文 件 编 辑 工 具 ， 包 括 v i 或 者 s e d i n p l a c e 的 时 候 ， 可 能 会 造 成 文 件 i n o d e 的 改 变 。 从 D o c k e r 1 . 1 . 0 起 ， 这 会 导 致 报 错 误 信 息 。 所 以 推 荐 的 方 式 是 直 接 挂 载 文 件 所 在 的 目 录 到 容 器 内 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第6章 Docker数据管理 &gt; 位置 1183</div><div class='noteText'>数 据 卷 容 器 也 是 一 个 容 器 ， 但 是 它 的 目 的 是 专 门 提 供 数 据 卷 给 其 他 容 器 挂 载 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第6章 Docker数据管理 &gt; 位置 1204</div><div class='noteText'>使 用 数 据 卷 容 器 可 以 让 用 户 在 容 器 之 间 自 由 地 升 级 和 移 动 数 据 卷 ， 具 体 的 操 作 将 在 下 一 节 进 行 讲 解 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第7章 端口映射与容器互联 &gt; 位置 1290</div><div class='noteText'>D o c k e r 通 过 两 种 方 式 为 容 器 公 开 连 接 信 息 ：</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第8章 使用Dockerfile创建镜像 &gt; 位置 1357</div><div class='noteText'>任 何 D o c k e r f i l e 中 第 一 条 指 令 必 须 为 F R O M 指 令 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第8章 使用Dockerfile创建镜像 &gt; 位置 1359</div><div class='noteText'>为 了 保 证 镜 像 精 简 ， 可 以 选 用 体 积 较 小 的 镜 像 如 A l p i n e 或 D e b i a n 作 为 基 础 镜 像 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第8章 使用Dockerfile创建镜像 &gt; 位置 1377</div><div class='noteText'>指 定 镜 像 的 默 认 入 口 命 令 ， 该 入 口 命 令 会 在 启 动 容 器 时 作 为 根 命 令 执 行 ， 所 有 传 入 值 作 为 该 命 令 的 参 数 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第8章 使用Dockerfile创建镜像 &gt; 位置 1389</div><div class='noteText'>为 后 续 的 R U N 、 C M D 、 E N T R Y P O I N T 指 令 配 置 工 作 目 录 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第8章 使用Dockerfile创建镜像 &gt; 位置 1392</div><div class='noteText'>为 了 避 免 出 错 ， 推 荐 W O R K D I R 指 令 中 只 使 用 绝 对 路 径 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第8章 使用Dockerfile创建镜像 &gt; 位置 1402</div><div class='noteText'>O N B U I L D 指 令 在 创 建 专 门 用 于 自 动 编 译 、 检 查 等 操 作 的 基 础 镜 像 时 ， 十 分 有 用 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第8章 使用Dockerfile创建镜像 &gt; 位置 1435</div><div class='noteText'>C O P Y 与 A D D 指 令 功 能 类 似 ， 当 使 用 本 地 目 录 为 源 目 录 时 ， 推 荐 使 用 C O P Y 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第8章 使用Dockerfile创建镜像 &gt; 位置 1465</div><div class='noteText'>自 1 7 . 0 5 版 本 开 始 ， D o c k e r 支 持 多 步 骤 镜 像 创 建 （ M u l t i s t a g e b u i l d ） 特 性 ， 可 以 精 简 最 终 生 成 的 镜 像 大 小 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第8章 使用Dockerfile创建镜像 &gt; 位置 1492</div><div class='noteText'>· 减 少 镜 像 层 数 ： 如 果 希 望 所 生 成 镜 像 的 层 数 尽 量 少 ， 则 要 尽 量 合 并 R U N 、 A D D 和 C O P Y 指 令 。 通 常 情 况 下 ， 多 个 R U N 指 令 可 以 合 并 为 一 条 R U N 指 令 ；</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第8章 使用Dockerfile创建镜像 &gt; 位置 1494</div><div class='noteText'>· 恰 当 使 用 多 步 骤 创 建 （ 1 7 . 0 5 + 版 本 支 持 ） ： 通 过 多 步 骤 创 建 ， 可 以 将 编 译 和 运 行 等 过 程 分 开 ， 保 证 最 终 生 成 的 镜 像 只 包 括 运 行 应 用 所 需 要 的 最 小 化 环 境 。 当 然 ， 用 户 也 可 以 通 过 分 别 构 造 编 译 镜 像 和 运 行 镜 像 来 达 到 类 似 的 结 果 ， 但 这 种 方 式 需 要 维 护 多 个 D o c k e r f i l e 。</h3>
<h2 class='sectionHeading'>第二部分 实战案例</h2><h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第9章 操作系统 &gt; 位置 1563</div><div class='noteText'>A l p i n e 操 作 系 统 是 一 个 面 向 安 全 的 轻 型 L i n u x 发 行 版 ， 关 注 安 全 ， 性 能 和 资 源 效 能 。 不 同 于 其 他 发 行 版 ， A l p i n e 采 用 了 m u s l l i b c 和 B u s y B o x 以 减 小 系 统 的 体 积 和 运 行 时 资 源 消 耗 ， 比 B u s y B o x 功 能 上 更 完 善 。 在 保 持 瘦 身 的 同 时 ， A l p i n e 还 提 供 了 包 管 理 工 具 a p k 查 询 和 安 装 软 件 包 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第9章 操作系统 &gt; 位置 1567</div><div class='noteText'>目 前 D o c k e r 官 方 推 荐 使 用 A l p i n e 作 为 默 认 的 基 础 镜 像 环 境 ， 这 可 以 带 来 多 个 优 势 ， 如 镜 像 下 载 速 度 加 快 、 镜 像 安 全 性 提 高 、 主 机 之 间 的 切 换 更 方 便 、 占 用 更 少 磁 盘 空 间 等 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第9章 操作系统 &gt; 位置 1596</div><div class='noteText'>D e b i a n 和 U b u n t u 都 是 目 前 较 为 流 行 的 D e b i a n 系 的 服 务 器 操 作 系 统 ， 十 分 适 合 研 发 场 景 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第9章 操作系统 &gt; 位置 1644</div><div class='noteText'>C e n t O S 是 目 前 企 业 级 服 务 器 的 常 用 操 作 系 统 ；</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第11章 Web服务与应用 &gt; 位置 1862</div><div class='noteText'>D o c k e r f i l e 创 建 镜 像 时 ， 会 继 承 父 镜 像 的 开 放 端 口 ， 但 却 不 会 继 承 启 动 命 令 。 因 此 ， 需 要 在 r u n . s h 脚 本 中 添 加 启 动 s s h d 的 服 务 的 命 令 ：</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第11章 Web服务与应用 &gt; 位置 1883</div><div class='noteText'>· 高 并 发 连 接 ： N g i n x 可 以 轻 松 支 持 超 过 1 0 0 K 的 并 发 ， 理 论 上 支 持 的 并 发 连 接 上 限 取 决 于 机 器 内 存 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第15章 容器与云服务 &gt; 位置 3066</div><div class='noteText'>使 用 基 于 M e s o s 的 D C / O S ， 或 者 使 用 D o c k e r S w a r m 和 C o m p o s e 以 获 得 纯 粹 的 D o c k e r 体 验 ；</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_orange'>橙色</span>) - 第16章 容器实战思考 &gt; 位置 3254</div><div class='noteText'>既 然 容 器 技 术 有 如 此 大 的 优 势 ， 为 什 么 D o c k e r 之 前 ， 容 器 并 没 有 引 发 广 泛 的 关 注 呢 ？ 核 心 问 题 在 于 易 用 性 。 前 人 走 完 了 九 十 九 步 ， 而 D o c k e r 迈 出 了 最 后 的 一 步 ， 引 发 了 从 量 变 到 质 变 的 突 破 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_orange'>橙色</span>) - 第16章 容器实战思考 &gt; 位置 3336</div><div class='noteText'>用 户 不 应 该 把 容 器 当 作 “ 银 弹 ” ， 并 不 是 所 有 应 用 和 服 务 都 适 合 容 器 化 。 对 于 “ 1 2 f a c t o r ” 类 型 应 用 [ 2 ] ， 容 器 化 是 非 常 容 易 和 平 滑 的 。 因 为 这 些 应 用 是 无 状 态 的 ， 而 且 它 们 在 微 服 务 架 构 中 可 以 在 很 短 时 间 内 完 成 启 停 ， 高 度 保 证 了 整 个 服 务 的 可 用 性 。 传 统 数 据 库 或 有 状 态 的 应 用 、 对 网 络 吞 吐 性 能 有 高 要 求 的 应 用 ， 并 不 适 合 容 器 化 。</h3>
<h2 class='sectionHeading'>第三部分 进阶技能</h2><h3 class='noteHeading'>标注 (<span class='highlight_orange'>橙色</span>) - 第17章 核心实现技术 &gt; 位置 3419</div><div class='noteText'>在 操 作 系 统 中 ， 包 括 内 核 、 文 件 系 统 、 网 络 、 进 程 号 （ P r o c e s s I D ， P I D ） 、 用 户 号 （ U s e r I D ， U I D ） 、 进 程 间 通 信 （ I n t e r P r o c e s s C o m m u n i c a t i o n ， I P C ） 等 资 源 ， 所 有 的 资 源 都 是 应 用 进 程 直 接 共 享 的 。 要 想 实 现 虚 拟 化 ， 除 了 要 实 现 对 内 存 、 C P U 、 网 络 I O 、 硬 盘 I O 、 存 储 空 间 等 的 限 制 外 ， 还 要 实 现 文 件 系 统 、 网 络 、 P I D 、 U I D 、 I P C 等 的 相 互 隔 离 。 前 者 相 对 容 易 实 现 一 些 ， 后 者 则 需 要 宿 主 主 机 系 统 的 深 入 支 持 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第17章 核心实现技术 &gt; 位置 3569</div><div class='noteText'>当 数 据 对 象 较 大 时 ， 往 往 意 味 着 较 差 的 I O 性 能 。 因 此 ， 对 于 I O 敏 感 型 应 用 ， 一 般 推 荐 将 容 器 修 改 的 数 据 通 过 v o l u m e 方 式 挂 载 ， 而 不 是 直 接 修 改 镜 像 内 数 据 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第17章 核心实现技术 &gt; 位置 3571</div><div class='noteText'>对 于 频 繁 启 停 D o c k e r 容 器 的 场 景 下 ， 文 件 系 统 的 I O 性 能 也 将 十 分 关 键</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第17章 核心实现技术 &gt; 位置 3620</div><div class='noteText'>· n e t = c o n t a i n e r ： N A M E _ o r _ I D ： 让 D o c k e r 将 新 建 容 器 的 进 程 放 到 一 个 已 存 在 容 器 的 网 络 栈 中 ， 新 容 器 进 程 有 自 己 的 文 件 系 统 、 进 程 列 表 和 资 源 限 制 ， 但 会 和 已 存 在 的 容 器 共 享 I P 地 址 和 端 口 等 网 络 资 源 ， 两 者 进 程 可 以 直 接 通 过 l o 环 回 接 口 通 信 ；</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第19章 安全防护与配置 &gt; 位置 4005</div><div class='noteText'>D o c k e r 的 安 全 性 在 生 产 环 境 中 是 十 分 关 键 的 衡 量 因 素 。 D o c k e r 容 器 的 安 全 性 ， 在 很 大 程 度 上 依 赖 于 L i n u x 系 统 自 身 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第19章 安全防护与配置 &gt; 位置 4013</div><div class='noteText'>命 名 空 间 提 供 了 最 基 础 也 是 最 直 接 的 隔 离 ， 在 容 器 中 运 行 的 进 程 不 会 被 运 行 在 本 地 主 机 上 的 进 程 和 其 他 容 器 通 过 正 常 渠 道 发 现 和 影 响 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第19章 安全防护与配置 &gt; 位置 4033</div><div class='noteText'>尽 管 控 制 组 不 负 责 隔 离 容 器 之 间 相 互 访 问 、 处 理 数 据 和 进 程 ， 但 是 它 在 防 止 恶 意 攻 击 特 别 是 拒 绝 服 务 攻 击 （ D D o S ） 方 面 是 十 分 有 效 的 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第19章 安全防护与配置 &gt; 位置 4049</div><div class='noteText'>从 上 面 的 例 子 可 以 看 出 ， 大 部 分 情 况 下 ， 容 器 并 不 需 要 “ 真 正 的 ” r o o t 权 限 ， 容 器 只 需 要 少 数 的 能 力 即 可 。 为 了 加 强 安 全 ， 容 器 可 以 禁 用 一 些 没 必 要 的 权 限 ， 包 括 ： · 完 全 禁 止 任 何 文 件 挂 载 操 作 ； · 禁 止 直 接 访 问 本 地 主 机 的 套 接 字 ； · 禁 止 访 问 一 些 文 件 系 统 的 操 作 ， 比 如 创 建 新 的 设 备 、 修 改 文 件 属 性 等 ； · 禁 止 模 块 加 载 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第19章 安全防护与配置 &gt; 位置 4053</div><div class='noteText'>不 恰 当 地 给 容 器 分 配 了 内 核 能 力 ， 会 导 致 容 器 内 应 用 获 取 破 坏 本 地 系 统 的 权 限 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第19章 安全防护与配置 &gt; 位置 4059</div><div class='noteText'>D o c k e r 服 务 的 运 行 目 前 还 需 要 r o o t 权 限 的 支 持 ， 因 此 服 务 端 的 安 全 性 十 分 关 键 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第19章 安全防护与配置 &gt; 位置 4063</div><div class='noteText'>乎 所 有 虚 拟 化 系 统 都 允 许 类 似 的 资 源 共 享 ， 而 没 法 阻 止 恶 意 用 户 共 享 主 机 根 文 件 系 统 到 虚 拟 机 系 统 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第19章 安全防护与配置 &gt; 位置 4072</div><div class='noteText'>· 将 容 器 的 r o o t 用 户 映 射 到 本 地 主 机 上 的 非 r o o t 用 户 ， 减 轻 容 器 和 主 机 之 间 因 权 限 提 升 而 引 起 的 安 全 问 题 ；</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第19章 安全防护与配置 &gt; 位置 4073</div><div class='noteText'>· 允 许 D o c k e r 服 务 端 在 非 r o o t 权 限 下 运 行 ， 利 用 安 全 可 靠 的 子 进 程 来 代 理 执 行 需 要 特 权 权 限 的 操 作 。 这 些 子 进 程 将 只 允 许 在 限 定 范 围 内 进 行 操 作 ， 例 如 仅 仅 负 责 虚 拟 网 络 设 定 或 文 件 系 统 管 理 、 配 置 操 作 等 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第19章 安全防护与配置 &gt; 位置 4130</div><div class='noteText'>必 须 对 容 器 内 应 用 进 行 严 格 的 安 全 审 查 。 同 时 从 容 器 层 面 来 看 ， 容 器 即 应 用 ， 原 先 保 障 应 用 安 全 的 各 种 手 段 ， 都 可 以 合 理 地 借 鉴 利 用 ；</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第20章 高级网络功能 &gt; 位置 4141</div><div class='noteText'>D o c k e r 服 务 启 动 时 会 首 先 在 主 机 上 自 动 创 建 一 个 d o c k e r 0 虚 拟 网 桥 ， 实 际 上 是 一 个 L i n u x 网 桥 。 网 桥 可 以 理 解 为 一 个 软 件 交 换 机 ， 负 责 挂 载 其 上 的 接 口 之 间 进 行 包 转 发 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第20章 高级网络功能 &gt; 位置 4381</div><div class='noteText'>随 着 D o c k e r 越 来 越 多 地 应 用 在 各 种 分 布 式 环 境 ， 网 络 方 面 的 需 求 越 来 越 复 杂 ， 容 器 网 络 目 前 已 经 成 为 了 云 计 算 领 域 的 关 键 技 术 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第21章 libnetwork插件化网络功能 &gt; 位置 4395</div><div class='noteText'>可 见 ， 对 于 使 用 C N M 的 容 器 管 理 系 统 来 说 ， 具 体 底 下 网 络 如 何 实 现 ， 不 同 子 网 彼 此 怎 么 隔 离 ， 有 没 有 Q o S ， 都 不 关 心 。 只 要 插 件 能 提 供 网 络 和 接 入 点 ， 只 需 把 容 器 给 接 上 或 者 拔 下 ， 剩 下 的 都 是 插 件 驱 动 自 己 去 实 现 ， 这 样 就 解 耦 了 容 器 和 网 络 功 能 ， 十 分 灵 活 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第21章 libnetwork插件化网络功能 &gt; 位置 4403</div><div class='noteText'>· O v e r l a y ： 是 用 v x l a n 隧 道 实 现 的 跨 主 机 容 器 网 络 ；</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第21章 libnetwork插件化网络功能 &gt; 位置 4404</div><div class='noteText'>· R e m o t e ： 扩 展 类 型 ， 预 留 给 其 他 外 部 实 现 的 方 案 ， 比 如 有 一 套 第 三 方 的 S D N 方 案 （ 如 O p e n S t a c k N e u t r o n ） 就 可 以 接 进 来 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第21章 libnetwork插件化网络功能 &gt; 位置 4405</div><div class='noteText'>从 位 置 上 看 ， l i b n e t w o r k 往 上 提 供 容 器 支 持 ， 往 下 隐 藏 实 现 差 异 ， 自 身 处 于 十 分 关 键 的 中 间 层 。 读 者 如 果 熟 悉 计 算 机 网 络 协 议 模 型 的 话 ， l i b n e t w o r k 可 以 类 比 为 最 核 心 的 T C P / I P 层 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第21章 libnetwork插件化网络功能 &gt; 位置 4505</div><div class='noteText'>D o c k e r 在 1 . 7 . 0 之 前 主 要 支 持 本 地 主 机 网 络 ， 之 后 重 点 加 强 了 跨 主 机 通 信 网 络 能 力 。 目 前 ， D o c k e r 的 功 能 已 经 从 单 主 机 上 小 规 模 服 务 场 景 ， 拓 展 到 了 大 规 模 的 集 群 场 景 甚 至 数 据 中 心 场 景 ， 为 容 器 云 场 景 提 供 了 便 利 支 持 。 从 位 置 上 看 ， l i b n e t w o r k 位 于 整 个 容 器 网 络 栈 最 核 心 的 中 间 层 。 通 过 容 器 网 络 模 型 ， l i b n e t w o r k 抽 象 了 下 层 的 网 络 实 现 ， 让 其 上 容 器 可 以 无 缝 使 用 不 同 的 底 层 网 络 支 持 技 术 。 无 论 是 物 理 网 络 还 是 虚 拟 网 络 ， 只 要 支 持 容 器 网 络 模 型 标 准 ， 即 可 被 D o c k e r 容 器 所 使 用 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第21章 libnetwork插件化网络功能 &gt; 位置 4509</div><div class='noteText'>相 比 传 统 场 景 ， 容 器 自 身 的 动 态 性 、 高 密 度 都 对 网 络 技 术 带 来 了 更 多 新 的 挑 战 。 D o c k e r 从 1 . 1 2 . 0 开 始 将 S w a r m 模 式 也 内 嵌 到 了 引 擎 中 ， 以 提 供 对 集 群 网 络 更 好 的 支 持 。 笔 者 相 信 ， 能 否 更 好 地 利 用 好 软 件 定 义 网 络 技 术 ， 将 是 容 器 在 大 规 模 集 群 场 景 下 得 到 有 效 使 用 的 关 键 。</h3>
<h2 class='sectionHeading'>第四部分 开源项目</h2><h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 位置 4515</div><div class='noteText'>开 源 技 术 之 所 以 受 到 越 来 越 多 的 关 注 ， 得 到 越 来 越 多 的 应 用 ， 很 重 要 的 一 个 原 因 是 不 同 项 目 之 间 彼 此 合 作 和 补 充 ， 共 同 构 建 了 健 康 完 善 的 生 态 系 统 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第22章 Etcd——高可用的键值数据库 &gt; 位置 4527</div><div class='noteText'>可 以 用 于 分 布 式 系 统 中 的 配 置 信 息 管 理 和 服 务 发 现 （ s e r v i c e d i s c o v e r y ） ，</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第22章 Etcd——高可用的键值数据库 &gt; 位置 4533</div><div class='noteText'>分 布 式 系 统 中 最 基 本 的 问 题 之 一 就 是 实 现 信 息 的 共 识 ， 在 此 基 础 上 才 能 实 现 对 服 务 配 置 信 息 的 管 理 、 服 务 的 发 现 、 更 新 、 同 步 ， 等 等 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第22章 Etcd——高可用的键值数据库 &gt; 位置 4536</div><div class='noteText'>E t c d 专 门 为 集 群 环 境 设 计 ， 采 用 了 更 为 简 洁 的 R a f t 共 识 算 法 [ 2 ] ， 同 样 可 以 实 现 数 据 强 一 致 性 ， 并 支 持 集 群 节 点 状 态 管 理 和 服 务 自 动 发 现 等 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第23章 Docker三剑客之Machine &gt; 位置 4826</div><div class='noteText'>M a c h i n e 项 目 是 D o c k e r 官 方 的 开 源 项 目 ， 负 责 实 现 对 D o c k e r 运 行 环 境 进 行 安 装 和 管 理 ， 特 别 在 管 理 多 个 D o c k e r 环 境 时 ， 使 用 M a c h i n e 要 比 手 动 管 理 高 效 得 多 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第24章 Docker三剑客之Compose &gt; 位置 4957</div><div class='noteText'>编 排 （ O r c h e s t r a t i o n ） 功 能 ， 是 复 杂 系 统 是 否 具 有 灵 活 可 操 作 性 的 关 键 。 特 别 在 D o c k e r 应 用 场 景 中 ， 编 排 意 味 着 用 户 可 以 灵 活 地 对 各 种 容 器 资 源 实 现 定 义 和 管 理 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第24章 Docker三剑客之Compose &gt; 位置 4959</div><div class='noteText'>C o m p o s e 作 为 D o c k e r 官 方 编 排 工 具 ， 其 重 要 性 不 言 而 喻 ， 它 可 以 让 用 户 通 过 编 写 一 个 简 单 的 模 板 文 件 ， 快 速 地 创 建 和 管 理 基 于 D o c k e r 容 器 的 应 用 集 群 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第24章 Docker三剑客之Compose &gt; 位置 4965</div><div class='noteText'>C o m p o s e 定 位 是 “ 定 义 和 运 行 多 个 D o c k e r 容 器 的 应 用 ” ，</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第24章 Docker三剑客之Compose &gt; 位置 5147</div><div class='noteText'>一 般 情 况 下 ， 推 荐 在 基 础 模 板 中 只 定 义 一 些 可 以 共 享 的 镜 像 和 环 境 变 量 ， 在 扩 展 模 板 中 具 体 指 定 应 用 变 量 、 链 接 、 数 据 卷 等 信 息 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第24章 Docker三剑客之Compose &gt; 位置 5397</div><div class='noteText'>该 命 令 十 分 强 大 ， 它 将 尝 试 自 动 完 成 包 括 构 建 镜 像 ， （ 重 新 ） 创 建 服 务 ， 启 动 服 务 ， 并 关 联 服 务 相 关 容 器 的 一 系 列 操 作 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第24章 Docker三剑客之Compose &gt; 位置 5401</div><div class='noteText'>如 果 使 用 d o c k e r c o m p o s e u p d ， 将 会 在 后 台 启 动 并 运 行 所 有 的 容 器 。 一 般 推 荐 生 产 环 境 下 使 用 该 选 项 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第25章 Docker三剑客之Swarm &gt; 位置 5615</div><div class='noteText'>一 旦 当 某 个 任 务 被 分 配 到 一 个 工 作 节 点 ， 将 无 法 被 转 移 到 另 外 的 工 作 节 点 ， 即 S w a r m 中 的 任 务 不 支 持 迁 移 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第25章 Docker三剑客之Swarm &gt; 位置 5693</div><div class='noteText'>用 户 访 问 集 群 中 任 意 节 点 的 ， 都 会 被 S w a r m 的 负 载 均 衡 器 代 理 到 对 应 的 服 务 实 例 。 用 户 也 可 以 配 置 独 立 的 负 载 均 衡 服 务 ， 后 端 指 向 集 群 中 各 个 节 点 对 应 的 外 部 端 口 ， 获 取 高 可 用 特 性 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第26章 Mesos——优秀的集群资源调度平台 &gt; 位置 5763</div><div class='noteText'>M e s o s 可 以 将 整 个 数 据 中 心 的 资 源 （ 包 括 C P U 、 内 存 、 存 储 、 网 络 等 ） 进 行 抽 象 和 调 度 ， 使 得 多 个 应 用 同 时 运 行 在 集 群 中 分 享 资 源 ， 并 无 须 关 心 资 源 的 物 理 分 布 情 况 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第26章 Mesos——优秀的集群资源调度平台 &gt; 位置 5764</div><div class='noteText'>如 果 把 数 据 中 心 中 的 集 群 资 源 看 做 一 台 服 务 器 ， 那 么 M e s o s 要 做 的 事 情 ， 其 实 就 是 今 天 操 作 系 统 内 核 的 职 责 ： 抽 象 资 源 + 调 度 任 务 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第26章 Mesos——优秀的集群资源调度平台 &gt; 位置 5767</div><div class='noteText'>· 支 持 数 万 个 节 点 的 大 规 模 场 景 （ A p p l e 、 T w i t t e r 、 e B a y 等 公 司 使 用 ） ；</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第26章 Mesos——优秀的集群资源调度平台 &gt; 位置 5917</div><div class='noteText'>后 者 作 为 服 务 管 理 的 端 口 ， 可 作 为 一 些 服 务 发 行 机 制 使 用 进 行 转 发 ， 在 整 个 M a r a t h o n 集 群 中 是 唯 一 的 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第26章 Mesos——优秀的集群资源调度平台 &gt; 位置 5926</div><div class='noteText'>首 先 需 要 强 调 ， M e s o s 自 身 只 是 一 个 资 源 调 度 框 架 ， 并 非 一 整 套 完 整 的 应 用 管 理 平 台 ， 所 以 只 有 M e s o s 自 己 是 不 能 干 活 的 。 但 是 基 于 M e s o s ， 可 以 比 较 容 易 地 为 各 种 应 用 管 理 框 架 或 者 中 间 件 平 台 （ 作 为 M e s o s 的 应 用 ） 提 供 分 布 式 运 行 能 力 ； 同 时 多 个 框 架 也 可 以 同 时 运 行 在 一 个 M e s o s 集 群 中 ， 提 高 整 体 的 资 源 使 用 效 率 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第26章 Mesos——优秀的集群资源调度平台 &gt; 位置 6063</div><div class='noteText'>M e s o s 目 前 支 持 的 应 用 框 架 分 为 四 大 类 ： 长 期 运 行 任 务 （ 以 及 P a a S ） 、 大 数 据 处 理 、 批 量 调 度 、 数 据 存 储 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第26章 Mesos——优秀的集群资源调度平台 &gt; 位置 6068</div><div class='noteText'>M e s o s 最 初 设 计 为 资 源 调 度 器 ， 然 而 其 灵 活 的 设 计 和 对 上 层 框 架 的 优 秀 支 持 ， 使 得 它 可 以 很 好 地 支 持 大 规 模 的 分 布 式 应 用 场 景 。 结 合 D o c k e r ， M e s o s 可 以 很 容 易 部 署 一 套 私 有 的 容 器 云 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第26章 Mesos——优秀的集群资源调度平台 &gt; 位置 6071</div><div class='noteText'>M e s o s 作 为 一 套 成 熟 的 开 源 项 目 ， 可 以 很 好 地 应 用 并 集 成 到 生 产 环 境 中 ， 但 它 的 定 位 集 中 在 资 源 调 度 ， 往 往 需 要 结 合 应 用 框 架 或 二 次 开 发 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6074</div><div class='noteText'>K u b e r n e t e s 已 经 成 为 目 前 容 器 云 领 域 影 响 力 最 大 的 开 源 平 台 ， 使 用 K u b e r n e t e s ， 用 户 可 以 轻 松 搭 建 和 管 理 一 个 可 扩 展 的 生 产 级 别 容 器 云 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6094</div><div class='noteText'>K u b e r n e t e s 支 持 通 过 模 板 来 定 义 服 务 的 配 置 ， 用 户 将 配 置 模 板 提 交 之 后 ， K u b e r n e t e s 会 自 动 管 理 （ 包 括 部 署 、 发 布 、 伸 缩 、 更 新 等 ） 应 用 容 器 来 让 服 务 维 持 指 定 状 态 ， 实 现 了 十 分 高 的 可 靠 性 ， 用 户 无 须 关 心 任 何 细 节 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6114</div><div class='noteText'>K u b e r n e t e s 为 了 更 好 地 管 理 应 用 的 生 命 周 期 ， 将 不 同 资 源 对 象 进 行 了 进 一 步 的 操 作 抽 象 。 学 习 使 用 K u b e r n e t e s 实 际 上 就 是 要 掌 握 这 些 不 同 的 抽 象 对 象 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6115</div><div class='noteText'>K u b e r n e t e s 中 每 种 对 象 都 拥 有 一 个 对 应 的 声 明 式 A P I 。 对 象 包 括 三 大 属 性 ： 元 数 据 （ m e t a d a t a ） 、 规 范 （ s p e c ） 和 状 态 （ s t a t u s ） 。 通 过 这 三 个 属 性 ， 用 户 可 以 定 义 让 某 个 对 象 处 于 给 定 的 状 态 （ 如 多 少 P o d 运 行 在 哪 些 节 点 上 ） 以 及 表 现 策 略 （ 如 如 何 升 级 、 容 错 ） ， 而 无 须 关 心 具 体 的 实 现 细 节 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6183</div><div class='noteText'>服 务 （ S e r v i c e ） 的 提 出 ， 主 要 是 要 解 决 P o d 地 址 可 变 的 问 题 。 由 于 P o d 随 时 可 能 发 生 故 障 ， 并 可 能 在 其 他 节 点 上 被 重 启 ， 它 的 地 址 是 不 能 保 持 固 定 的 。 因 此 ， 用 一 个 服 务 来 代 表 提 供 某 一 类 功 能 （ 可 以 通 过 标 签 来 筛 选 ） 的 一 些 P o d ， 并 分 配 不 随 P o d 位 置 变 化 而 改 变 的 虚 拟 访 问 地 址 （ C l u s t e r I P ） 。 这 也 符 合 微 服 务 的 理 念 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6248</div><div class='noteText'>某 些 应 用 需 要 关 心 P o d 的 状 态 （ 包 括 各 种 数 据 库 和 配 置 服 务 等 ） ， 挂 载 独 立 的 存 储 。 一 旦 当 某 个 P o d 故 障 退 出 后 ， K u b e r n e t e s 会 创 建 同 一 命 名 的 P o d ， 并 挂 载 原 来 的 存 储 ， 以 便 P o d 中 应 用 继 续 执 行 ， 实 现 了 该 应 用 的 高 可 用 性 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6261</div><div class='noteText'>标 签 （ L a b e l ） 是 一 组 键 值 对 ， 用 来 标 记 所 绑 定 对 象 （ 典 型 的 就 是 P o d ） 的 识 别 属 性 ， 进 而 可 以 分 类 。 比 如 n a m e = a p a c h e | n g i n x 、 t y p e = w e b | d b 、 r e l e a s e = a l p h a | b e t a | s t a b l e 、 t i e r = f r o n t e n d | b a c k e n d 等 。 另 外 ， L a b e l 键 支 持 通 过 / 来 添 加 前 缀 ， 可 以 用 来 标 注 资 源 的 组 织 名 称 等 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6266</div><div class='noteText'>注 解 （ A n n o t a t i o n ） 跟 标 签 很 相 似 ， 也 是 键 值 对 ， 但 并 非 用 来 标 识 对 象 ， 同 时 可 以 存 储 更 多 更 复 杂 的 信 息 。 不 同 的 是 ， 注 解 并 不 是 为 了 分 类 资 源 对 象 ， 而 是 为 了 给 对 象 增 加 更 丰 富 的 描 述 信 息 。 这 些 信 息 是 任 意 的 ， 数 据 量 可 以 很 大 ， 可 以 包 括 各 种 结 构 化 、 非 结 构 化 的 数 据 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6296</div><div class='noteText'>K u b e r n e t e s 用 U I D 和 名 字 （ N a m e ） 来 标 识 对 象 。 其 中 ， U I D 是 全 局 唯 一 的 ， 并 且 不 能 复 用 ； 而 名 字 则 仅 仅 要 求 对 某 种 类 型 的 资 源 （ 在 同 一 个 命 名 空 间 内 ） 内 是 唯 一 的 ， 并 且 当 某 个 资 源 移 除 后 ， 其 名 字 可 以 被 新 的 资 源 复 用 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6300</div><div class='noteText'>命 名 空 间 （ N a m e s p a c e ） 用 来 隔 离 不 同 用 户 的 资 源 ， 类 似 租 户 或 项 目 的 概 念 。 默 认 情 况 下 ， 相 同 命 名 空 间 中 的 对</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6303</div><div class='noteText'>K u b e r n e t e s 集 群 启 动 后 ， 会 保 留 两 个 特 殊 的 命 名 空 间 ： · d e f a u l t ： 资 源 未 指 定 命 名 空 间 情 况 下 ， 默 认 属 于 该 空 间 ； · k u b e s y s t e m ： 由 K u b e r n e t e s 系 统 自 身 创 建 的 资 源 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6402</div><div class='noteText'>· 要 采 用 分 布 式 架 构 ， 保 证 良 好 的 可 扩 展 性 ；</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6403</div><div class='noteText'>· 控 制 平 面 要 实 现 逻 辑 上 的 集 中 ， 数 据 平 面 要 实 现 物 理 上 的 分 布 ；</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6403</div><div class='noteText'>· 得 有 一 套 资 源 调 度 系 统 ， 负 责 所 有 的 资 源 调 度 工 作 ， 要 容 易 插 拔 ；</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6404</div><div class='noteText'>· 对 资 源 对 象 要 进 行 抽 象 ， 所 有 资 源 要 能 实 现 高 可 用 性 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6431</div><div class='noteText'>E t c d 是 K u b e r n e t e s 集 群 中 最 重 要 的 组 件 。 a p i s e r v e r 的 大 量 功 能 都 是 通 过 跟 E t c d 进 行 交 互 来 实 现 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6554</div><div class='noteText'>K u b e r n e t e s 试 图 通 过 插 件 化 的 形 式 来 采 用 A p p C 提 出 的 C o n t a i n e r N e t w o r k i n g I n t e r f a c e （ C N I ） 规 范 。 这 意 味 着 ， 将 来 所 有 支 持 K u b e r n e t e s 的 网 络 插 件 都 要 遵 循 该 规 范 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6565</div><div class='noteText'>K u b e r n e t e s 在 网 络 方 面 的 设 计 理 念 包 括 如 下 几 点 ： · 所 有 容 器 之 间 不 使 用 N A T 就 可 以 互 相 通 信 ；</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6566</div><div class='noteText'>· 所 有 节 点 跟 容 器 之 间 不 使 用 N A T 就 可 以 互 相 通 信 ； · 容 器 自 己 看 到 的 地 址 ， 跟 其 他 人 访 问 自 己 使 用 的 地 址 应 该 是 一 样 的 （ 其 实 还 是 在 说 不 要 有 N A T ） 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6567</div><div class='noteText'>可 以 看 到 ， 这 个 设 计 理 念 跟 云 平 台 里 面 的 虚 拟 机 网 络 十 分 类 似 ， 这 意 味 着 一 些 基 于 虚 拟 机 云 的 项 目 可 以 很 方 便 地 迁 移 到 K u b e r n e t e s 平 台 上 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6569</div><div class='noteText'>可 以 有 两 种 设 计 思 路 ： 直 接 路 由 和 O v e r l a y 网 络 。 这 也 是 现 在 云 计 算 领 域 常 见 的 网 络 实 现 方 式 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6579</div><div class='noteText'>O v e r l a y 网 络 相 对 要 复 杂 一 些 ， 支 持 底 层 更 灵 活 的 转 发 。 目 前 包 括 F l a n n e l 、 O p e n V S w i t c h 、 W e a v e 、 C a l i c o 等 一 系 列 方 案 都 能 实 现 用 O v e r l a y 网 络 来 联 通 不 同 节 点 上 的 P o d 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6581</div><div class='noteText'>以 F l a n n e l 网 络 为 例 ， 提 前 为 各 个 N o d e 分 配 互 不 重 合 的 子 网 ， 例 如 将 完 整 的 1 7 2 . 1 6 . 0 . 0 / 1 6 私 有 网 段 划 分 为 多 个 子 网 1 7 2 . 1 6 . 1 0 . 0 / 2 4 、 1 7 2 . 1 6 . 1 1 . 0 / 2 4 … … ， 各 个 N o d e 上 的 P o d 分 配 网 络 地 址 的 时 候 只 能 从 这 个 子 网 范 围 内 分 配 ， 避 免 了 地 址 的 冲 突 ， 如</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第27章 Kubernetes——生产级容器集群平台 &gt; 位置 6597</div><div class='noteText'>虽 然 K u b e r n e t e s 自 身 并 没 有 提 出 P a a S 或 者 D e v O p s 的 理 念 ， 但 它 提 供 的 资 源 抽 象 接 口 和 生 命 周 期 管 理 概 念 ， 让 用 户 可 以 很 方 便 地 进 行 二 次 开 发 ， 打 造 生 产 级 别 的 应 用 系 统 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第28章 其他相关项目 &gt; 位置 6843</div><div class='noteText'>C o r e O S 基 于 一 套 精 简 的 L i n u x 环 境 ， 不 使 用 包 管 理 工 具 ， 而 将 所 有 应 用 都 进 行 容 器 化 ， 彼 此 隔 离 ， 从 而 提 高 了 系 统 的 安 全 性 。 此 外 ， 运 行 期 间 ， 系 统 分 区 是 只 读 状 态 ， 利 用 主 从 分 区 支 持 更 稳 定 的 无 缝 升 级 。 配 合 E t c d （ 分 布 式 高 可 用 的 键 值 数 据 库 ） 、 F l e e t （ 分 布 式 i n i t 任 务 管 理 ） 、 F l a n n e l （ O v e r l a y 网 络 管 理 ） 等 工 具 ， C o r e O S 也 将 适 用 于 大 规 模 集 群 环 境 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第28章 其他相关项目 &gt; 位置 6863</div><div class='noteText'>一 般 来 说 ， 要 将 一 个 应 用 放 到 容 器 里 ， 需 要 考 虑 两 方 面 的 因 素 ， 一 是 应 用 依 赖 的 配 置 信 息 ； 二 是 应 用 运 行 时 候 的 输 出 日 志 信 息 。</h3>
<h3 class='noteHeading'>标注 (<span class='highlight_yellow'>黄色</span>) - 第28章 其他相关项目 &gt; 位置 6905</div><div class='noteText'>出 现 了 一 些 开 源 项 目 试 图 让 虚 拟 机 的 h y p e r v i s o r 来 支 持 容 器 格 式 ， 代 表 性 的 有 H y p e r 项 目 。</h3>
</div> 
</body> 
</html> 
